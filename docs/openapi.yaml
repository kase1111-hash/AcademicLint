openapi: 3.1.0
info:
  title: AcademicLint API
  description: |
    ## AcademicLint API

    A semantic clarity analyzer for academic writing that detects common issues
    in scholarly prose and provides actionable suggestions for improvement.

    ### Features

    - **Semantic Density Analysis**: Measures the ratio of meaningful content to filler
    - **Eight Detection Types**: Identifies vagueness, unsupported causation, circular definitions, weasel words, hedge stacking, jargon density, missing citations, and filler phrases
    - **Domain-Aware Analysis**: Customize detection with academic domain vocabularies
    - **Multiple Strictness Levels**: From relaxed to academic-grade strictness

    ### Quick Start

    ```python
    import requests

    response = requests.post(
        "http://localhost:8080/v1/check",
        json={"text": "Your academic text here..."}
    )
    print(response.json()["summary"]["density_grade"])
    ```

    ### Authentication

    Currently, the API does not require authentication. For production deployments,
    consider adding API key authentication via a reverse proxy.

    ### Rate Limiting

    No rate limiting is enforced by default. Configure rate limiting at the
    infrastructure level for production use.
  version: 1.0.0
  contact:
    name: AcademicLint Support
    url: https://github.com/academiclint/academiclint
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  x-logo:
    url: https://raw.githubusercontent.com/academiclint/academiclint/main/docs/logo.png

servers:
  - url: http://localhost:8080
    description: Local development server
  - url: https://api.academiclint.io
    description: Production server

tags:
  - name: analysis
    description: Text analysis endpoints for checking semantic clarity
  - name: domains
    description: Domain vocabulary management and listing
  - name: health
    description: Health check and status endpoints

paths:
  /v1/check:
    post:
      tags:
        - analysis
      summary: Analyze text for clarity issues
      description: |
        Analyze academic text for semantic clarity issues.

        This endpoint performs comprehensive analysis including:
        - **Semantic density calculation**: Measures meaningful content ratio
        - **Issue detection**: Identifies 8 types of clarity problems
        - **Actionable suggestions**: Provides specific improvements

        ### Strictness Levels
        - `relaxed`: Minimal flagging, catches only severe issues
        - `standard`: Balanced analysis for general academic writing
        - `strict`: Thorough analysis for publication-ready work
        - `academic`: Maximum strictness for peer-reviewed submissions

        ### Domains
        Specify a domain to customize detection for your field:
        `philosophy`, `computer-science`, `medicine`, `law`, `history`,
        `psychology`, `economics`, `physics`, `biology`, `sociology`
      operationId: checkText
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CheckRequest'
            examples:
              basic:
                summary: Basic analysis
                value:
                  text: "The phenomenon of consciousness is fundamentally important. Some researchers believe it emerges from neural processes."
              with_config:
                summary: With configuration
                value:
                  text: "The ontological status of mathematical objects remains contentious. Platonists argue that numbers exist independently of human thought."
                  config:
                    level: standard
                    domain: philosophy
              strict_mode:
                summary: Strict analysis
                value:
                  text: "Research shows that the algorithm performs well in most cases."
                  config:
                    level: strict
                    min_density: 0.6
      responses:
        '200':
          description: Analysis completed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CheckResponse'
              example:
                id: check_a1b2c3d4
                created_at: "2025-01-11T10:30:00Z"
                input_length: 127
                processing_time_ms: 234
                summary:
                  density: 0.62
                  density_grade: adequate
                  flag_count: 2
                  word_count: 22
                  sentence_count: 2
                  paragraph_count: 1
                  concept_count: 8
                  filler_ratio: 0.05
                  suggestion_count: 2
                paragraphs:
                  - index: 0
                    text: "The phenomenon of consciousness is fundamentally important. Some researchers believe it emerges from neural processes."
                    span:
                      start: 0
                      end: 127
                    density: 0.62
                    word_count: 22
                    sentence_count: 2
                    flags:
                      - type: UNDERSPECIFIED
                        term: fundamentally important
                        span:
                          start: 31
                          end: 54
                        line: 1
                        column: 32
                        severity: MEDIUM
                        message: Vague intensifier without specific meaning
                        suggestion: Specify why or how it is important
                        example_revision: "essential for understanding human cognition"
                        context: "...consciousness is fundamentally important. Some..."
                      - type: WEASEL
                        term: Some researchers
                        span:
                          start: 56
                          end: 72
                        line: 1
                        column: 57
                        severity: MEDIUM
                        message: Vague attribution without specific source
                        suggestion: Specify which researchers or cite sources
                        example_revision: "Dennett and Chalmers (2020) argue that..."
                        context: "...important. Some researchers believe it..."
                overall_suggestions:
                  - Consider specifying which researchers you're referencing
                  - Add citations to support claims about consciousness
        '400':
          description: Invalid request (empty text or invalid config)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                empty_text:
                  summary: Empty text
                  value:
                    detail: Text cannot be empty
                invalid_level:
                  summary: Invalid strictness level
                  value:
                    detail: "Invalid level 'extreme'. Must be one of: relaxed, standard, strict, academic"
                invalid_density:
                  summary: Invalid density value
                  value:
                    detail: min_density must be between 0.0 and 1.0
        '500':
          description: Internal server error during analysis
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                detail: An unexpected error occurred during analysis

  /v1/health:
    get:
      tags:
        - health
      summary: Health check
      description: |
        Check the health status of the API server.

        Returns the current status, version, and whether NLP models are loaded.
        Use this endpoint for:
        - Load balancer health checks
        - Kubernetes liveness/readiness probes
        - Monitoring and alerting systems
      operationId: healthCheck
      responses:
        '200':
          description: Service is healthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResponse'
              example:
                status: healthy
                version: 1.0.0
                models_loaded: true

  /v1/domains:
    get:
      tags:
        - domains
      summary: List available domains
      description: |
        List all available academic domain vocabularies.

        Domains contain field-specific terminology that won't be flagged as jargon
        when the domain is specified in analysis requests.

        ### Built-in Domains
        - **philosophy**: Epistemology, ontology, ethics terminology
        - **computer-science**: Programming, algorithms, systems terms
        - **medicine**: Clinical, anatomical, pharmacological vocabulary
        - **law**: Legal terminology and Latin phrases
        - **history**: Historiographical and period-specific terms
        - **psychology**: Cognitive, behavioral, clinical terms
        - **economics**: Micro/macro economics vocabulary
        - **physics**: Theoretical and applied physics terms
        - **biology**: Molecular, ecological, evolutionary terms
        - **sociology**: Social theory and research methodology terms
      operationId: listDomains
      responses:
        '200':
          description: List of available domains
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DomainsResponse'
              example:
                domains:
                  - name: philosophy
                    term_count: 150
                    description: Philosophy and critical theory terminology
                  - name: computer-science
                    term_count: 200
                    description: Programming, algorithms, and systems terms
                  - name: medicine
                    term_count: 180
                    description: Clinical and biomedical vocabulary
                  - name: law
                    term_count: 120
                    description: Legal terminology and Latin phrases
                  - name: history
                    term_count: 100
                    description: Historiographical terms
                  - name: psychology
                    term_count: 160
                    description: Cognitive and behavioral science terms
                  - name: economics
                    term_count: 140
                    description: Economic theory vocabulary
                  - name: physics
                    term_count: 170
                    description: Theoretical and applied physics terms
                  - name: biology
                    term_count: 190
                    description: Life sciences terminology
                  - name: sociology
                    term_count: 130
                    description: Social theory and methodology terms

components:
  schemas:
    ConfigSchema:
      type: object
      description: Configuration options for analysis
      properties:
        level:
          type: string
          description: "Strictness level: relaxed, standard, strict, academic"
          enum:
            - relaxed
            - standard
            - strict
            - academic
          default: standard
          example: standard
        min_density:
          type: number
          format: float
          description: Minimum acceptable density (0.0-1.0)
          minimum: 0.0
          maximum: 1.0
          default: 0.5
          example: 0.5
        domain:
          type: string
          description: Built-in domain name
          example: philosophy
          nullable: true
        domain_terms:
          type: array
          items:
            type: string
          description: Additional domain-specific terms to exclude from jargon detection
          example:
            - ontology
            - epistemology
            - hermeneutics
          nullable: true

    CheckRequest:
      type: object
      description: Request body for /check endpoint
      required:
        - text
      properties:
        text:
          type: string
          minLength: 1
          description: The academic text to analyze for semantic clarity issues
          example: "The phenomenon of consciousness is fundamentally important. Some researchers believe it emerges from neural processes."
        config:
          $ref: '#/components/schemas/ConfigSchema'
          nullable: true

    SpanSchema:
      type: object
      description: Character span in text
      required:
        - start
        - end
      properties:
        start:
          type: integer
          minimum: 0
          description: Start character position (0-indexed)
          example: 15
        end:
          type: integer
          minimum: 0
          description: End character position (exclusive)
          example: 27

    FlagSchema:
      type: object
      description: A detected semantic clarity issue
      required:
        - type
        - term
        - span
        - line
        - column
        - severity
        - message
        - suggestion
        - context
      properties:
        type:
          type: string
          description: Issue type
          enum:
            - UNDERSPECIFIED
            - UNSUPPORTED_CAUSAL
            - CIRCULAR
            - WEASEL
            - HEDGE_STACK
            - JARGON_DENSE
            - CITATION_NEEDED
            - FILLER
          example: WEASEL
        term:
          type: string
          description: The specific text that triggered the flag
          example: Some researchers
        span:
          $ref: '#/components/schemas/SpanSchema'
        line:
          type: integer
          minimum: 1
          description: Line number (1-indexed)
          example: 2
        column:
          type: integer
          minimum: 1
          description: Column number (1-indexed)
          example: 1
        severity:
          type: string
          description: Severity level
          enum:
            - LOW
            - MEDIUM
            - HIGH
          example: MEDIUM
        message:
          type: string
          description: Human-readable explanation of the issue
          example: Vague attribution without specific source
        suggestion:
          type: string
          description: Actionable suggestion for improvement
          example: Specify which researchers or cite sources
        example_revision:
          type: string
          description: Example of how to revise the text
          example: "Smith et al. (2023) argue that..."
          nullable: true
        context:
          type: string
          description: Surrounding text for context
          example: "...consciousness. Some researchers believe it emerges..."

    ParagraphSchema:
      type: object
      description: Analysis result for a single paragraph
      required:
        - index
        - text
        - span
        - density
        - word_count
        - sentence_count
        - flags
      properties:
        index:
          type: integer
          minimum: 0
          description: Paragraph index (0-indexed)
          example: 0
        text:
          type: string
          description: The paragraph text
        span:
          $ref: '#/components/schemas/SpanSchema'
        density:
          type: number
          format: float
          minimum: 0.0
          maximum: 1.0
          description: Semantic density score (0.0-1.0, higher is better)
          example: 0.62
        word_count:
          type: integer
          minimum: 0
          description: Number of words in paragraph
          example: 45
        sentence_count:
          type: integer
          minimum: 0
          description: Number of sentences in paragraph
          example: 3
        flags:
          type: array
          items:
            $ref: '#/components/schemas/FlagSchema'
          description: List of issues detected in this paragraph

    SummarySchema:
      type: object
      description: Aggregate analysis statistics for the entire document
      required:
        - density
        - density_grade
        - flag_count
        - word_count
        - sentence_count
        - paragraph_count
        - concept_count
        - filler_ratio
        - suggestion_count
      properties:
        density:
          type: number
          format: float
          minimum: 0.0
          maximum: 1.0
          description: Overall semantic density score (0.0-1.0)
          example: 0.62
        density_grade:
          type: string
          description: "Qualitative grade: vapor (<0.3), thin (0.3-0.5), adequate (0.5-0.7), dense (0.7-0.85), crystalline (>0.85)"
          enum:
            - vapor
            - thin
            - adequate
            - dense
            - crystalline
          example: adequate
        flag_count:
          type: integer
          minimum: 0
          description: Total number of issues detected
          example: 5
        word_count:
          type: integer
          minimum: 0
          description: Total word count
          example: 287
        sentence_count:
          type: integer
          minimum: 0
          description: Total sentence count
          example: 12
        paragraph_count:
          type: integer
          minimum: 0
          description: Total paragraph count
          example: 3
        concept_count:
          type: integer
          minimum: 0
          description: Number of distinct concepts identified
          example: 15
        filler_ratio:
          type: number
          format: float
          minimum: 0.0
          maximum: 1.0
          description: Ratio of filler words to total words
          example: 0.08
        suggestion_count:
          type: integer
          minimum: 0
          description: Number of improvement suggestions
          example: 5

    CheckResponse:
      type: object
      description: Response body for /check endpoint containing full analysis results
      required:
        - id
        - created_at
        - input_length
        - processing_time_ms
        - summary
        - paragraphs
        - overall_suggestions
      properties:
        id:
          type: string
          description: Unique identifier for this analysis
          example: check_a1b2c3d4
        created_at:
          type: string
          format: date-time
          description: ISO 8601 timestamp of analysis
          example: "2025-01-11T10:30:00Z"
        input_length:
          type: integer
          minimum: 0
          description: Length of input text in characters
          example: 1547
        processing_time_ms:
          type: integer
          minimum: 0
          description: Processing time in milliseconds
          example: 234
        summary:
          $ref: '#/components/schemas/SummarySchema'
        paragraphs:
          type: array
          items:
            $ref: '#/components/schemas/ParagraphSchema'
          description: Per-paragraph analysis results
        overall_suggestions:
          type: array
          items:
            type: string
          description: Document-level improvement suggestions
          example:
            - Consider adding citations to support causal claims

    HealthResponse:
      type: object
      description: Response body for /health endpoint
      required:
        - status
        - version
        - models_loaded
      properties:
        status:
          type: string
          description: "Service status: 'healthy' or 'unhealthy'"
          example: healthy
        version:
          type: string
          description: API version string
          example: 1.0.0
        models_loaded:
          type: boolean
          description: Whether NLP models are loaded and ready
          example: true

    DomainInfo:
      type: object
      description: Information about an available domain
      required:
        - name
        - term_count
      properties:
        name:
          type: string
          description: Domain identifier
          example: philosophy
        term_count:
          type: integer
          minimum: 0
          description: Number of terms in domain vocabulary
          example: 150
        description:
          type: string
          description: Human-readable description of the domain
          example: Philosophy and critical theory terminology
          nullable: true

    DomainsResponse:
      type: object
      description: Response body for /domains endpoint
      required:
        - domains
      properties:
        domains:
          type: array
          items:
            $ref: '#/components/schemas/DomainInfo'
          description: List of available domains

    ErrorResponse:
      type: object
      description: Standard error response format
      required:
        - detail
      properties:
        detail:
          type: string
          description: Error message describing what went wrong
          example: Text cannot be empty
